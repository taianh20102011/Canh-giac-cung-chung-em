// import { NextResponse } from 'next/server'
// import type { NextRequest } from 'next/server'

// // B·ªô nh·ªõ t·∫°m t·∫°i Edge (d√πng Map trong demo, production n√™n d√πng Upstash Redis)
// const ipRequestCount = new Map<string, { count: number; time: number }>()

// export async function middleware(req: NextRequest) {
//   const ip = req.ip || req.headers.get('x-forwarded-for') || 'unknown'
//   const currentTime = Date.now()

//   const info = ipRequestCount.get(ip)
//   if (info) {
//     // Reset m·ªói 10 gi√¢y
//     if (currentTime - info.time < 10000) {
//       info.count++
//       if (info.count > 20) {
//         return new Response('üö´ Too many requests ‚Äî please slow down', { status: 429 })
//       }
//     } else {
//       ipRequestCount.set(ip, { count: 1, time: currentTime })
//     }
//   } else {
//     ipRequestCount.set(ip, { count: 1, time: currentTime })
//   }

//   return NextResponse.next()
// }

// // √Åp d·ª•ng middleware cho to√†n b·ªô trang ho·∫∑c ch·ªâ /api
// export const config = {
//   matcher: ['/api/:path*', '/contact', '/login'],
// }

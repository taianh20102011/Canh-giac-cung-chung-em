<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>TÆ°Æ¡ng tÃ¡c</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header><h1>ğŸ’¬ GÃ³p Ã½ & TÆ°Æ¡ng tÃ¡c</h1></header>
  <nav>
    <a href="index.html">Trang chá»§</a>
    <a href="chieutro.html">ChiÃªu trÃ²</a>
    <a href="5khong5nen.html">5 KHÃ”NG - 5 NÃŠN</a>
    <a href="phanung.html">Pháº£n á»©ng nhanh</a>
    <a href="sangtao.html">SÃ¡ng táº¡o</a>
    <a href="tracnghiem.html">Tráº¯c nghiá»‡m</a>
    <a href="tuongtac.html">TÆ°Æ¡ng tÃ¡c</a>
    <a href="dangbai.html">ÄÄƒng bÃ i</a>
  </nav>

  <section>
    <form id="formYKien">
      <input type="text" id="ten" placeholder="TÃªn cá»§a báº¡n">
      <textarea id="ykien" rows="4" placeholder="Nháº­p Ã½ kiáº¿n..."></textarea>
      <button type="submit">ğŸ“¤ Gá»­i Ã½ kiáº¿n</button>
    </form>
    <div id="dsYKien"></div>
  </section>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { 
      getFirestore, collection, addDoc, query, orderBy, onSnapshot 
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // ğŸ”‘ Config Firebase (copy Ä‘Ãºng tá»« Project settings)
    const firebaseConfig = {
      apiKey: "AIzaSyA-w4aviFPK1-wtE_pVN01saRCq5bdgL9c",
      authDomain: "cungchungemcanhgiac.firebaseapp.com",
      projectId: "cungchungemcanhgiac",
      storageBucket: "cungchungemcanhgiac.appspot.com",
      messagingSenderId: "24327141155",
      appId: "1:24327141155:web:139b53155d697a7af87e96"
    };

    // Khá»Ÿi táº¡o Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ğŸ“¤ Gá»­i gÃ³p Ã½
    const form = document.getElementById("formYKien");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const ten = document.getElementById("ten").value.trim();
      const ykien = document.getElementById("ykien").value.trim();

      if (ten && ykien) {
        try {
          await addDoc(collection(db, "y_kien"), {
            ten,
            ykien,
            time: new Date()
          });
          form.reset();
        } catch (err) {
          console.error("âŒ Lá»—i khi lÆ°u Firebase:", err);
          alert("âš ï¸ KhÃ´ng thá»ƒ gá»­i gÃ³p Ã½!");
        }
      } else {
        alert("âš ï¸ Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin.");
      }
    });

    // ğŸ‘€ Hiá»ƒn thá»‹ realtime
    const dsBox = document.getElementById("dsYKien");
    const q = query(collection(db, "y_kien"), orderBy("time", "desc"));

    onSnapshot(q, (snapshot) => {
      dsBox.innerHTML = ""; // XÃ³a danh sÃ¡ch cÅ©
      snapshot.forEach((doc) => {
        const data = doc.data();
        const div = document.createElement("div");
        div.className = "card";
        const date = data.time?.toDate?.().toLocaleString("vi-VN") || "";
        div.innerHTML = `<b>${data.ten}:</b> ${data.ykien}<br><small>${date}</small>`;
        dsBox.appendChild(div);
      });
    });
  </script>
  <footer><p>Â© 2025 - THCS LÃ½ Tá»± Trá»ng GÃ² Váº¥p</p></footer>
</body>
</html>



